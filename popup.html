<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Save Tweet to Notion</title>
  <style>
    /* ç»Ÿä¸€è®¾è®¡ä»¤ç‰Œ */
    :root {
      --h-pad: 16px;     /* å·¦å³å†…è¾¹è· */
      --v-pad: 8px;      /* ä¸Šä¸‹å†…è¾¹è· */
      --gap: 8px;        /* æ¨¡å—é—´è· */
      --font-size: 14px; /* å­—ä½“å¤§å° */
    }

    /* ç»Ÿä¸€å­—ä½“ç³»ç»Ÿ */
    body, input, textarea, button, .card, .card-title {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: var(--font-size);
    }

    /* ç»Ÿä¸€å¡ç‰‡æ ·å¼ */
    .card {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: var(--v-pad) var(--h-pad);
      box-shadow: 0 1px 3px rgba(0,0,0,.05);
      box-sizing: border-box;
      width: 100%;
    }

    /* ç»Ÿä¸€æ ‡é¢˜æ ·å¼ */
    .card-title {
      font-weight: 600;
      color: #475569;
      margin-bottom: 6px;
      display: block;
      font-size: 12px;
    }

    /* ç»Ÿä¸€æ¨¡å—é—´è· */
    .block {
      margin: var(--gap) 0;
    }

    .block.tight {
      margin: 3px 0;
    }

    /* å¯¹é½ç³»ç»Ÿ */
    .block.align-out {
      margin-left: calc(var(--h-pad) - var(--h-pad));
      margin-right: calc(var(--h-pad) - var(--h-pad));
    }

    /* è¾“å…¥æ¡†ç»„æ ·å¼ */
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      width: 100%;
      margin-bottom: 12px;
    }

    /* è¾“å…¥æ¡†æ ·å¼ */
    input, textarea {
      padding: var(--v-pad) var(--h-pad);
      border: 1px solid #cfd9de;
      border-radius: 6px;
      font-family: inherit;
      box-sizing: border-box;
      width: 100%;
    }

    body {
      width: 350px;
      padding: 0;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      min-height: 400px;
      display: flex;
      flex-direction: column;
    }
    
    .container {
  flex: 1;
  display: flex;
  flex-direction: column;
    padding: 12px 12px 12px 12px;
}
    
    h3 {
      margin: 0 0 15px 0;
      color: #1da1f2;
      text-align: center;
    }
    
    .input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  margin-bottom: 12px;
}
    
    label {
      font-size: 11px;
      font-weight: 600;
      color: #536471;
    }
    
    input, textarea {
      padding: 8px 10px;
      border: 1px solid #cfd9de;
      border-radius: 6px;
      font-size: 12px;
      font-family: inherit;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: #1da1f2;
    }
    
    textarea {
      resize: vertical;
    }
    
    button {
      padding: 8px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .btn-primary {
      background-color: #1da1f2;
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #1a8cd8;
    }
    
    .btn-secondary {
      background-color: #000;
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: #333;
    }
    
    .btn-secondary:disabled {
      background-color: #cfd9de;
      cursor: not-allowed;
    }
    
    .btn-tertiary {
      background-color: transparent;
      color: #1da1f2;
      border: 1px solid #cfd9de;
    }
    
    .btn-tertiary:hover {
      background-color: #f7f9fa;
    }
    
    .help-section {
      background-color: #f8fafc;
      padding: 12px;
      border-radius: 8px;
      font-size: 12px;
      color: #64748b;
      border: 1px solid #e2e8f0;
    }
    
    .help-section a {
      color: #1da1f2;
      text-decoration: none;
    }
    
    .help-section a:hover {
      text-decoration: underline;
    }
    
    .status {
      padding: 6px 8px;
      margin-top: 8px;
      border-radius: 4px;
      font-size: 11px;
      display: none;
      text-align: center;
    }
    
    .success {
      background-color: #e8f5e9;
      color: #1b5e20;
      border: 1px solid #a5d6a7;
      display: block;
    }
    
    .error {
      background-color: #fbe9e7;
      color: #d50000;
      border: 1px solid #ffcdd2;
      display: block;
    }
    
    .config-info {
      display: flex;

      justify-content: space-between; /* å·¦å³å¯¹é½ */
      align-items: center;
      width: 100%;
      padding: 6px 22px;   /* å‡å°å†…è¾¹è· */
      margin: 0;
      font-size: 11px;     /* å‡å°å­—ä½“ */
    }
    
    .config-status {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: opacity 0.2s ease;
    }
    
    .config-status:hover {
      opacity: 0.8;
    }
    
    .config-info button {
      padding: 3px 10px;   /* å‡å°æŒ‰é’®å†…è¾¹è· */
      font-size: 10px;     /* å‡å°æŒ‰é’®å­—ä½“ */
      background: #ffffff;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      color: #374151;
      font-weight: 500;
      transition: all 0.2s ease;
      white-space: nowrap;
    }
    
    .config-info button:hover {
      background: #f9fafb;
      border-color: #9ca3af;
    }

    #mainContent {
  flex: 1;
}

    /* ä¿å­˜æˆåŠŸçŠ¶æ€æ ·å¼ */
    .save-success {
      background-color: #e8f5e9;
      border: 1px solid #a5d6a7;
      border-radius: 8px;
      padding: 12px;
      margin: 15px 0;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .save-success-status {
      margin-bottom: 12px;
      color: #1b5e20;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .save-success .icon {
      font-size: 16px;
    }

    .open-notion-btn {
      padding: 6px 16px;
      font-size: 13px;
      background-color: #2563eb;
      border: none;
      border-radius: 6px;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 4px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .open-notion-btn:hover {
      background-color: #1d4ed8;
      transform: translateY(-1px);
    }

    .open-notion-btn:active {
      transform: translateY(0);
    }

    /* å‡å°æ•´ä½“é«˜åº¦ */
    body {
      min-height: 200px;
    }


    .validation-status {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 16px;
    }

    .validation-status.loading::after {
        content: 'â³'; /* or a spinner icon */
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .validation-status.valid::after {
        content: 'âœ…';
    }

    .validation-status.invalid::after {
        content: 'âŒ';
    }

    /* åœ¨é…ç½®é¡µé¢éšè—ç¼–è¾‘æŒ‰é’® */
    #configSection:not([style*="display: none"]) ~ #configStatusSection #editConfigBtn {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- é…ç½®åŒºåŸŸ - åˆå§‹æ˜¾ç¤º -->
    <div id="configSection">
      <div class="input-group">
        <label for="notionApiKey" class="card-title">Notion API Key</label>
        <div style="position: relative; display: flex; align-items: center;">
          <input type="password" id="notionApiKey" placeholder="Enter your Notion API Key" style="width: 100%; padding-right: 30px;">
          <span id="apiKeyStatus" class="validation-status"></span>
        </div>
      </div>
      
      <div class="input-group">
        <label for="databaseId" class="card-title">Database ID</label>
        <div style="position: relative; display: flex; align-items: center;">
          <input type="text" id="databaseId" placeholder="Enter your Database ID" style="width: 100%; padding-right: 30px;">
          <span id="dbIdStatus" class="validation-status"></span>
        </div>
      </div>
      
      <!-- Type è¾“å…¥æ¡†ç°åœ¨åœ¨é…ç½®åŒºåŸŸå†… -->
      <div class="input-group">
        <label for="typeOptions" class="card-title">Categories (space separated)</label>
        <input
            type="text"
            id="typeOptions"
            placeholder="Example: äº¤æ˜“ DeFi æ–°é—» æ•™è‚²"
        >
        <small style="color: #64748b; font-size: 11px; margin-top: 4px; line-height: 1.3;">
            Enter categories separated by spaces. These will appear when saving tweets.
        </small>
      </div>
      
      <div class="input-group" style="margin-top: 16px;">
        <label class="card-title">Default Save Options</label>
        <label style="display: flex; align-items: center; font-size: 13px; margin-bottom: 8px;">
          <input type="checkbox" id="defaultSaveThread" style="margin-right: 8px; width: 16px; height: 16px;">
          Threads
        </label>
        <label style="display: flex; align-items: center; font-size: 13px;">
          <input type="checkbox" id="defaultSaveComments" style="margin-right: 8px; width: 16px; height: 16px;">
          Comments
        </label>
      </div>

      <div style="margin-top: 16px;">
        <button id="saveConfigBtn" class="btn-primary" style="width: 45%; padding: 8px; font-size: 13px; font-weight: 600;">Save Configuration</button>
      </div>
      
      <div class="help-section" style="margin-top: 20px; padding: 12px; border-radius: 8px; background: #f8fafc; border: 1px solid #e2e8f0;">
        <p style="margin: 0 0 8px 0; font-weight: 600; color: #374151; font-size: 12px;">Need help getting these values?</p>
        <div style="font-size: 11px; color: #64748b; line-height: 1.4;">
          <p style="margin: 4px 0;">1. Get API Key: <a href="https://www.notion.so/my-integrations" target="_blank" style="color: #2563eb; text-decoration: none;">Notion Integrations</a></p>
          <p style="margin: 4px 0;">2. Get Database ID from your Notion database URL</p>
        </div>
      </div>
    </div>
    
    <!-- ä¸»åŠŸèƒ½åŒºåŸŸ - åˆå§‹éšè— -->
    <div id="mainSection" style="padding-right:20px; padding-left: 20px;">
      <div id="mainContent">
        <!-- ä¿å­˜æˆåŠŸçŠ¶æ€åŒºåŸŸ -->
        <div id="saveSuccess" style="display: none;" class="save-success">
          <div class="save-success-status">
            <span class="icon">âœ…</span>
            <span class="message">Tweet saved to Notion successfully!</span>
          </div>
          <button id="openInNotion" class="open-notion-btn">
            <span>åœ¨ Notion ä¸­æ‰“å¼€</span>
          </button>
        </div>
        <!-- çŠ¶æ€æ¶ˆæ¯åŒºåŸŸ -->
        <!-- This will be moved to messageContainer -->
        <!-- <div id="statusMessage" class="status"></div> -->
      </div>
      <div id="messageContainer"></div> <!-- New container for status messages -->
    </div>
    
    <!-- é…ç½®çŠ¶æ€ -->
    <div id="configStatusSection" class="block align-out" style="display: none;">
      <div id="configStatusBar">
        <div class="config-info">
          <div class="config-status">
            <span>âœ…</span>
            <span>Configuration Saved</span>
          </div>
          <button id="editConfigBtn" class="btn-tertiary">Edit</button>
        </div>
      </div>
    </div>
    
    <!-- åº•éƒ¨æ ‡é¢˜ -->
    <div id="footerTitle" class="block" style="display: flex; align-items: center; justify-content: center; font-size: 12px; color: #64748b; font-weight: 500;">
      ğŸ¦ Tweet to Notion
    </div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>